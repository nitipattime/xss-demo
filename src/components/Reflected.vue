<script setup>
import { ref, onMounted } from 'vue'

const query = ref('')

onMounted(() => {
  const params = new URLSearchParams(window.location.search)
  query.value = params.get('q') || ''
})
</script>

<template>
  <div style="padding: 20px">
    <h1>üîé Search Page (Reflected XSS Demo)</h1>

    <p>‡∏•‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢ query string ‡πÄ‡∏ä‡πà‡∏ô:</p>
    <code>?q=Vue</code>

    <h3>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô:</h3>
    <div v-html="query"></div>
    <!-- /?q=<img%20src=x%20onerror=alert(%27XSS%27)> -->
  </div>
</template>

 <!-- <script setup>
import { ref, onMounted } from 'vue';

// npm install dompurify
// import DOMPurify from 'dompurify';
// userInput.value = DOMPurify.sanitize(params.get('name') || 'Guest');

const userInput = ref('')
const userInput2 = ref('')
const postedComment = ref('')

onMounted(() => {
  const params = new URLSearchParams(window.location.search);
  userInput2.value = params.get('name') || 'Guest';
});

function postComment() {
  console.log(userInput2.value)
  postedComment.value = userInput2.value // ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á XSS ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
}
</script>

<template>
  <div id="app">
    <h2>DOM-Based XSS in Vue.js</h2>
    <p>‡∏•‡∏≠‡∏á‡πÉ‡∏™‡πà‡πÉ‡∏ô URL ‡πÄ‡∏ä‡πà‡∏ô <code>?name=Guest</code></p>

    <div>
      ‚ö†Ô∏è ‡∏ä‡πà‡∏≠‡∏á‡πÇ‡∏´‡∏ß‡πà DOM XSS ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ 
      <strong>Result:</strong>
      <div v-html="userInput2"></div>
    </div>
    <hr>

    <h2>‡πÉ‡∏™‡πà‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå</h2>
    <input v-model="userInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ" />
    <button @click="postComment">‡πÇ‡∏û‡∏™‡∏ï‡πå</button>

    <h3>‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå:</h3>
    ‚Äº <img src=x onerror="alert('XSS')">
    <div v-html="postedComment"></div> ‡∏à‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á XSS 
  </div>
</template>

<style scoped>
#app {
  max-width: 600px;
  margin: 50px auto;
}

input {
  width: 100%;
  padding: 10px;
  margin-bottom: 10px;
}

button {
  padding: 8px 16px;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}

.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}

.logo.vue:hover {
  filter: drop-shadow(0 0 2em #42b883aa);
}
</style>
 -->
